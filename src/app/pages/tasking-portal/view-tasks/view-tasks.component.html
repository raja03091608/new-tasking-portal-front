<!-- eslint-disable @angular-eslint/template/eqeqeq -->
<section class="body-card">
	<div class="container-fluid">
	  <div class="row">
		<div class="col-md-12">
		  <div class="card">
			<div class="card-header card-header2">
				<h3 class="card-title">Approved Task</h3>
			  <!-- <div class="row">
				<div class="card-toolbar">
					<ul class="nav nav-tabs nav-line-tabs nav-stretch fs-6 border-0">
						<li class="nav-item">

							<a class="nav-link cursor-pointer" [ngClass]="{ active: activeTab === 'TaskWaiting' }"
								(click)="setActiveTab('TaskWaiting')">Tasks Waiting For Approval</a>
						</li>
					</ul>
				</div>
			  </div> -->
			</div>
			<div class="container table-options">
			  <div class="row">
				<div class="col-md-6">
					<!-- <mat-paginator [length]="totalLength" [pageSize]="10" (page)="pageEvent=$event" (page)="getTasking()"  [pageSizeOptions]="[10,20,30,50,100]" aria-label="Select page" >
					</mat-paginator> -->
				  <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[10,20,30,50,100]"
					aria-label="Select page">
				  </mat-paginator>
				</div>
				<div class="col-md-6">
				  <mat-form-field appearance="fill">
					<mat-label>Search your text here</mat-label>
					<input matInput (keyup)="applyFilter($event)" class="search-mat-table" #input>
				  </mat-form-field>
				</div>
			  </div>
			</div>

			<div class="card-body">
			<div class="tab-content" id="myTabContent">
			<div class="tab-pane pt-5 pb-5" [ngClass]="{ active: activeTab === 'TaskWaiting' }">
			<table mat-table [dataSource]="dataSourcelist" class="table table-striped table-row-bordered gy-5 gs-7 border rounded table-style-1">
			  <ng-container matColumnDef="task_number_dee">
				<th mat-header-cell *matHeaderCellDef><b> Task Number</b></th>
				<td mat-cell *matCellDef="let country"> {{country.task_number_dee}} </td>
			  </ng-container>
			  <ng-container matColumnDef="task_name">
				<th mat-header-cell *matHeaderCellDef width="10%"><b>Task Name </b></th>
				<td mat-cell *matCellDef="let country"> {{country.task_name}} </td>
				<!-- <td mat-cell *matCellDef="let country"> <div [innerHTML]="country.task_name"></div> </td> -->
			  </ng-container>
			  <!--<ng-container matColumnDef="file">
					<th mat-header-cell *matHeaderCellDef><b>File</b></th>
					<td mat-cell *matCellDef="let country"> {{country.file}} </td>
					</ng-container> -->

			  <ng-container matColumnDef="cost_implication">
				<th mat-header-cell *matHeaderCellDef><b>Cost (Rs.)</b></th>
				<td mat-cell *matCellDef="let country"> {{country.cost_implication}} </td>
			  </ng-container>
			  <ng-container matColumnDef="sponsoring_directorate">
				<th mat-header-cell *matHeaderCellDef><b>Sponsoring Directorate </b></th>
				<td mat-cell *matCellDef="let country"> {{country.sponsoring_directorate}} <span *ngIf="country.sponsoring_directorate=='Others'">({{country.SD_comments?country.SD_comments:''}})</span></td>
			  </ng-container>

			  <ng-container matColumnDef="time_frame_for_completion">
				<th mat-header-cell *matHeaderCellDef class="text-center"><b>Time for Completion </b></th>
				<td mat-cell *matCellDef="let country" class="text-center"> {{country.time_frame_for_completion_month?country.time_frame_for_completion_month+" Month's ":''}} {{country.time_frame_for_completion_days?country.time_frame_for_completion_days+" Day's":''}}</td>
			  </ng-container>
			  <ng-container matColumnDef="legacy_data">
				<th mat-header-cell *matHeaderCellDef><b>Legancy Data</b></th>
				<td mat-cell *matCellDef="let country"> {{country.legacy_data}} </td>
			  </ng-container>

			  <ng-container matColumnDef="status">
				<th mat-header-cell *matHeaderCellDef><b> Status </b></th>
				<td mat-cell *matCellDef="let country">
				  <!-- <a href="javascript:void(0)" (click)="openCurrentStatus(country)" title="Approval Status" class="edit-icon text-primary" style="padding:5px;background: #dc3545;"><span class="bi bi-info-circle" style="color:#FFF;"></span></a> -->
				  <div>
					<a href="javascript:void(0)" (click)="openCurrentStatus(country)" title="Approval Status"  class="single-icon blue"><i class="fas fa-info-circle"></i></a>

					<!-- &nbsp;&nbsp; -->
				    <p>(Approved)</p>

				  </div>

				  <ng-container *ngIf="api.userid.process_id==3 && api.userid.role_id==3 && country.approved_level==4">
					 <a href="javascript:void(0)"  (click)="openApproveDialog(country)" title="Submit Form" class="edit-icon text-primary" style="padding:5px;background: #28a645;"><span class="material-icons-outlined" style="color:#FFF;">task_alt</span></a>
				  </ng-container>

			   </td>
			 </ng-container>
			 <ng-container matColumnDef="completed">

				<th mat-header-cell *matHeaderCellDef class="{{api.userid.process_id=='1'?'show_element':'hide_element'}}"><b> Completed </b></th>
				<td mat-cell *matCellDef="let country" class="{{api.userid.process_id=='1'?'show_element':'hide_element'}}">

					<div *ngIf="permission.archive==true && country.completed_status==1; else show">

							<a href="javascript:void(0)" *ngIf="permission.archive==true && country.completed_status==1" placement="end" tooltipClass="dark-theme" ngbTooltip="Archive">Completed</a>
					</div>

						<ng-template #show ><a href="javascript:void(0)" data-toggle="modal" data-target="#completedTask-modal" title="Completed Task" class="single-icon blue" placement="top" tooltipClass="dark-theme" (click)="completedtask(country)"
							placement="end" tooltipClass="dark-theme" ngbTooltip="Completed Task"><i class="bi bi-card-checklist"></i></a></ng-template>

				</td>

			 </ng-container>

			 <ng-container matColumnDef="pdf">
				<th mat-header-cell *matHeaderCellDef><b> Download </b></th>
				<td mat-cell *matCellDef="let country">
				  <!-- <div>
				<a href="javascript:void(0)"  (click)="printReceipt(country)" title="Task Approval History"  class="single-icon blue"><i class="bi bi-file-pdf"></i></a>
				  </div> -->
				  <div class="row">
					<div class="col-md-6">
						<!-- <a
							href="javascript:void(0)"
							(click)="
								printReceipt(country)
							"
							title="Task Approval History"
							class="single-icon blue"
							><i
								class="bi bi-file-pdf"
							></i
						></a> -->
						<a
							href="javascript:void(0)"
							(click)="
								UploadReceipt(country)
							"
							title="Full Report Download"
							class="single-icon blue"
							><i class="bi bi-file-pdf"></i
						></a>
					</div>
					<!-- <div class="col-md-6">
						<a
							href="javascript:void(0)"
							(click)="
								UploadReceipt(country)
							"
							title="Full Report Download"
							class="single-icon blue"
							><i class="bi bi-upload"></i
						></a>
					</div> -->
				</div>
			</ng-container>









			<ng-container matColumnDef="Export">
				<th mat-header-cell *matHeaderCellDef><b> Export </b></th>
				<td mat-cell *matCellDef="let country">

				  <div class="row">
					<div class="col-md-6">

						<a href="javascript:void(0)" data-toggle="modal" data-target="#export" class="edit-icon text-primary single-icon blue"  (click)="opentask(country)" placement="end" tooltipClass="dark-theme" ngbTooltip=Export tooltipClass="dark-theme" ><i class="bi bi-upload"></i></a>
					</div>

				</div>
			</ng-container>



















			  <ng-container matColumnDef="actions">
				<th width="15%" class="" mat-header-cell *matHeaderCellDef><ng-container><b>Actions</b></ng-container></th>
				<td class="" mat-cell *matCellDef="let country">

					<a href="javascript:void(0)" data-toggle="modal" data-target="#tasking-modal" class="single-icon blue" (click)="add(country)" *ngIf="permission.add==true"  placement="end" tooltipClass="dark-theme" ngbTooltip="Add Status"><i class="fas fa-plus"></i></a>
					<ng-container *ngIf="api.userid.process_id==1">
						<a href="javascript:void(0)" data-toggle="modal" data-target="#tasking-modal" class="single-icon blue" *ngIf="permission.archive==true && country.completed_status==1" (click)="archivetask(country)"placement="end" tooltipClass="dark-theme" ngbTooltip="Archive"><i class="bi bi-archive-fill"></i></a>

						<a href="javascript:void(0)" data-toggle="modal" class="single-icon blue" *ngIf="permission.delete==true" (click)="approvedDelete(country.id)" placement="end" tooltipClass="dark-theme" ngbTooltip="Delete"><i class="bi bi-trash"></i></a>

					</ng-container>



					<a href="javascript:void(0)" data-toggle="modal" data-target="#viewTasking-modal" class="single-icon blue"
					placement="top" tooltipClass="dark-theme"
					(click)="viewStatusDialog(country)" placement="end" tooltipClass="dark-theme" ngbTooltip="View Status">
					<i class="fas fa-eye"></i> </a>
				</td>
			  </ng-container>


			  <ng-container matColumnDef="noData">
				<th mat-footer-cell *matFooterCellDef [attr.colspan]="displayedColumns.length" class="norecord">
				  No Records Found!
				</th>
			  </ng-container>
			  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			  <tr mat-footer-row *matFooterRowDef="['noData']" [hidden]="dataSourcelist && dataSourcelist.data.length > 0"></tr>
			  <!-- <tr class="mat-row" *matNoDataRow>
				<td *ngIf='filterValue' class="norecord" colspan="4"><b>No data matching with "{{input.value}}"</b></td>
			  </tr> -->
			</table>
			</div>

			</div>
			</div>
		  </div>
		</div>
	  </div>
	</div>
  </section>

  <!-- modal -->

<div class="modal fade master-modal-style" id="trial-status-modal" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
	   <div class="modal-content">
		  <div class="modal-header">
			<h3 class="card-title align-items-start flex-column pt-5">
				<span class="fw-bold mb-3">Task Approval History</span>
			</h3>
			 <button type="button" class="btn-close" (click)="closestatusmodal()" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="false">&times;</span>
			</button>
		  </div>
		  <div class="modal-body form-style-md form-style-font linux">
			<h4>
				<div><b>Task Name -</b> {{taskname}} ({{tasknumber}})</div>
			</h4>
			 <div class="form-row">
				   <div class="col-md-12">
                    <h3 >APSO</h3>
					<table class="table table-bordered table-style4">
						<tr>
							<th width="30%">Date</th><th width="20%">Status</th><th width="50%">Comments</th><th width="50%">Created_by</th>

					  </tr>

					  <tr *ngFor="let list1 of countryList1; let i= index;">
						<ng-container *ngIf="list1.APSO_recommender==1||list1.APSO_recommender==2" >
						<td>{{list1 && list1.created_on| date:'dd-MM-yyyy hh:mm '}}</td><td>{{(list1&& list1.APSO_recommender==1)?'Recommeneded':'Not Recommeneded'}}</td><td>{{list1&& list1.comments}}</td>
						<!-- <td>{{list1&& list1.created_by.first_name?list1&& list1.created_by.first_name:''}}</td> -->
						<td>
							<span *ngIf="list1 && list1.created_by != ''">{{list1&& list1.created_by && list1.created_by.first_name?list1.created_by.first_name:'-'}}</span>
							<span *ngIf="list1 && list1.created_by ==''">-</span>
						</td>
					</ng-container>

						</tr>

						</table>

						&nbsp;

                    <h3 >WESEE</h3>
					<table class="table table-bordered table-style4">
						<tr>
							<th width="30%">Date</th><th width="20%">Status</th><th width="50%">Comments</th><th width="50%">Created_by</th>

					  </tr>

					  <tr *ngFor="let list1 of countryList1; let i= index;">
						<ng-container *ngIf="list1.WESEE_recommender==1||list1.WESEE_recommender==2" >
						<td>{{list1 && list1.created_on| date:'dd-MM-yyyy hh:mm '}}</td><td>{{(list1&& list1.WESEE_recommender==1)?'Recommeneded':'Not Recommeneded'}}</td><td>{{list1&& list1.comments}}</td><td>
							<span *ngIf="list1 && list1.created_by != ''">{{list1&& list1.created_by && list1.created_by.first_name?list1.created_by.first_name:'-'}}</span>
							<span *ngIf="list1 && list1.created_by ==''">-</span>
						</td>
					</ng-container>

						</tr>

						</table>

						&nbsp;

                        <h3 >DEE</h3>
						<table class="table table-bordered table-style4">
						<tr>
							<th width="30%">Date</th><th width="20%">Status</th><th width="50%">Comments</th><th width="50%">Created_by</th>

					  </tr>
					  <tr *ngFor="let list1 of countryList1; let i= index;">
						<ng-container *ngIf="list1.DEE_recommender==1||list1.DEE_recommender==2" >
						<td>{{list1 && list1.created_on| date:'dd-MM-yyyy hh:mm '}}</td><td>{{(list1&& list1.DEE_recommender==1)?'DEE Recommeneded':'Not Recommeneded'}}</td><td>{{list1&& list1.comments}}</td><td>
							<span *ngIf="list1 && list1.created_by != ''">{{list1&& list1.created_by && list1.created_by.first_name?list1.created_by.first_name:'-'}}</span>
							<span *ngIf="list1 && list1.created_by ==''">-</span>
						</td>
					</ng-container>

						</tr>

						</table>

						&nbsp;


							<h3>ACOM(IT&S)</h3>
							<table class="table table-bordered table-style4">
							<tr >
								<th width="30%">Date</th><th width="20%">Status</th><th width="50%">Comments</th><th width="50%">Created_by</th>

						  </tr>
						  <tr *ngFor="let list1 of countryList1; let i= index;">
							<ng-container *ngIf="list1.ACOM_recommender==1||list1.ACOM_recommender==2" >
							<td>{{list1 && list1.created_on| date:'dd-MM-yyyy hh:mm '}}</td><td>{{(list1&& list1.ACOM_recommender==1)?'Recommeneded':'Not Recommeneded'}}</td><td>{{list1&& list1.comments}}</td><td>
								<span *ngIf="list1 && list1.created_by != ''">{{list1&& list1.created_by && list1.created_by.first_name?list1.created_by.first_name:'-'}}</span>
								<span *ngIf="list1 && list1.created_by ==''">-</span>
							</td>
						</ng-container>

							</tr>

							</table>
							<h3 >COM</h3>
							<table class="table table-bordered table-style4">
								<tr>
									<th width="30%">Date</th><th width="20%">Status</th><th width="50%">Comments</th><th width="50%">Created_by</th>

							  </tr>

							  <tr *ngFor="let list1 of countryList1; let i= index;">
								<ng-container *ngIf="list1.COM_approver==1 || list1.COM_approver==3"  >
								<td>{{list1 && list1.created_on| date:'dd-MM-yyyy hh:mm '}}</td><td>{{(list1&& list1.COM_approver==1 || list1.COM_approver==3)?'Approved':'Not Approved'}}</td><td>{{list1&& list1.comments}}</td><td>
									<span *ngIf="list1 && list1.created_by != ''">{{list1&& list1.created_by && list1.created_by.first_name?list1.created_by.first_name:'-'}}</span>
									<span *ngIf="list1 && list1.created_by ==''">-</span>
								</td>
							</ng-container>

								</tr>

								</table>


						<!-- <div class="row d-flex justify-content-center mt-4 mb-70 timeline" *ngIf="selectedTrial && selectedTrial.history && selectedTrial.history.length>0">
							<div class="col-md-12">
							   <div class="main-card mb-3 card">
								   <div class="card-body">
									   <h5 class="card-title">Trials Log</h5>
									   <div class="vertical-timeline vertical-timeline--animate vertical-timeline--one-column">
										   <ng-container *ngFor="let history of selectedTrial.history">
											  <div class="vertical-timeline-item vertical-timeline-element">
												  <div>
													  <span class="vertical-timeline-element-icon bounce-in" *ngIf="history.status==1">
														  <i class="badge badge-success"><span class="bi bi-hand-thumbs-up">thumb_up</span></i>
													  </span>
													  <span class="vertical-timeline-element-icon bounce-in" *ngIf="history.status==2">
														  <i class="badge badge-danger"><span class="material-icons-outlined" >thumb_down</span></i>
													  </span>
													  <div class="vertical-timeline-element-content bounce-in">
														  <h4 class="timeline-title">{{(history.approved_by.first_name+' '+history.approved_by.last_name) +' ('+history.approved_role.name+' from '+history.approved_by.process.name+' )' }}</h4>
														  <p>{{ history.comments }}</p>
														  <span class="vertical-timeline-element-date">{{moment(history.approved_on).format('DD-MM-YYYY hh:mm A')}}</span>
													  </div>
												  </div>
											  </div>
										   </ng-container>
									   </div>
								   </div>
							   </div>
							</div>
						 </div> -->
				   </div>
			 </div>


		  </div>
	   </div>
	</div>
 </div>

 <div class="modal fade master-modal-style" id="tasking-modal" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<h2 class="modal-title" id="exampleModalLabel">Add Status</h2>
				<button type="button" (click)="close()" class="btn-close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="false">&times;</span>
				</button>
			</div>
			<div class="modal-body form-style-md form-style-font linux">
				<div id="hide_alert" class="alert alert-danger form-error-message my-4" *ngIf="error_msg==true">{{ErrorMsg}}
				</div>
				<div class="modal-body p-0" style="padding-top:25px; padding-bottom:0%" >
					<div class="row g-6 g-xl-9 ">
						<div class="col-md-3" style="border-right: 1px solid #e4e6ef;">
							<form [formGroup]="this.taskingForm" (ngSubmit)="onSubmit()" >
								<div class="row">

									<div class="d-flex flex-column w-100 me-2">
										<div class="matt-group matselect mat-box">
											<mat-label>Title</mat-label>
											<mat-form-field appearance="fill">
											<mat-select #select formControlName="title"
											 placeholder="Select Process">
											 <mat-option>Select Title</mat-option>
											 <mat-option *ngFor="let user of processview" [value]="user.name">{{user.name}}
											 </mat-option>

											 </mat-select>
											 <!-- <mat-error *ngIf="Error('process','required')">Please select title</mat-error> -->
											</mat-form-field>
											<!-- <input  formControlName="title" type="text"  class="form-control" > -->
										</div>
									</div>
									<!-- <div class="col-md-12">
										<div class="matt-group matselect">
										  <mat-label>Process <b class="star">*</b></mat-label>
										  <mat-form-field appearance="fill">
										   <mat-select #select formControlName="process"
											 placeholder="Select Process">
											 <mat-option>Select Process</mat-option>
											 <mat-option *ngFor="let user of processview" [value]="user.id">{{user.name}}</mat-option>
										   </mat-select>
										   <mat-error *ngIf="Error('process','required')">Please select unit</mat-error> -->
										  <!-- </mat-form-field> -->
										<!-- </div> -->
									 <!-- </div> -->

									<!-- <div class="mb-5">
										<div class="matt-group">
										  <mat-label>File<b class="star">*</b></mat-label>
										  <input #fileInput formControlName="file"type="file"  class="form-control" (change)="onImageHandler($event)" >
										  <mat-error *ngIf="Error('file','required') && showError">Select File</mat-error>

										</div>
									</div> -->
									<div class="row mb-5">
										<!--begin::Col-->
										<div class="col-md-6 fv-row">
											<div class="matt-group matselect">
												<mat-label>Start Date</mat-label>
											<!--end::Label-->
											<!-- <input
											class="form-control"
											placeholder="YYYY-MM-DD"
											formControlName="start_date"
											ngbDatepicker
											#d="ngbDatepicker"
											(dateChange)="issueFormat($event)"
											onclick="$('#date').trigger('click'); return false;"
											(click)="d.toggle()"/> -->
											<mat-form-field appearance="fill">
											<input matInput [matDatepicker]="picker_date" formControlName="start_date" onclick="$('#start_date').trigger('click'); return false;"  placeholder="MM/DD/YYYY" [(ngModel)]="start_date">
											<mat-datepicker-toggle matSuffix [for]="picker_date" id="start_date"></mat-datepicker-toggle>
											<mat-datepicker #picker_date></mat-datepicker>
										</mat-form-field>
										</div>
										</div>

									<div class="col-md-6 fv-row">
										<div class="matt-group matselect">
											<mat-label>End Date</mat-label>
											<mat-form-field appearance="fill">
												<input matInput [matDatepicker]="picker_date2" formControlName="end_date" onclick="$('#end_date').trigger('click'); return false;"  placeholder="MM/DD/YYYY" [(ngModel)]="end_date">
												<mat-datepicker-toggle matSuffix [for]="picker_date2" id="end_date"></mat-datepicker-toggle>
												<mat-datepicker #picker_date2></mat-datepicker>
											</mat-form-field>
										</div>
									</div>
									</div>
								</div>
								<div class="col-md-12" hidden>
									<div class="matt-group">
									   <mat-form-field appearance="fill">
										  <input matInput placeholder="" formControlName="created_by"  >
									   </mat-form-field>
									</div>
								 </div>
								 <div class="col-md-12" hidden>
									<div class="matt-group">
									   <mat-form-field appearance="fill">
										  <input matInput placeholder="" formControlName="created_ip"  >
									   </mat-form-field>
									</div>
								 </div>
								 <div class="form-group">
									<div class="matt-group">
										<mat-label>Summary</mat-label>
										<!-- <mat-form-field class="example-full-width" appearance="fill"> -->
											<textarea class="form-control" rows="3" formControlName="status_summary"></textarea>
											<!-- <mat-error *ngIf="ErrorApproval('comments','required') && showError">Enter comments</mat-error> -->
										<!-- </mat-form-field> -->
									</div>
								</div>

								<div class="row mb-5">
									<div class="col-md-12 fv-row">
										<mat-label>Description</mat-label>
										<!-- <td mat-cell *matCellDef="let country" ><ng-container>  <div [innerHTML]="country.status_description"> </div></ng-container> </td>  -->
										<textarea class="form-control" rows="3" formControlName="status_description"></textarea>
										<!-- <ckeditor formControlName="status_description"></ckeditor> -->
									</div>
								</div>
								<div class="d-flex flex-column w-100 me-2">
									<div class="matt-group">
										<mat-label>Project Progress(%)</mat-label>
										<input  formControlName="project_progress" id="file"type="text"  class="form-control" >
									</div>
								</div>
								<div class="col-md-12 fv-row mt-2">
									<div class="matt-group">
										<mat-label>File</mat-label>
										<a *ngIf="img_link1!=0" href="{{ImgUrl}}" class="edit-icon text-primary"
										  ><span class="material-icons-outlined"><span class="bi bi-file-earmark-text-fill" style="color:blue" ></span></span></a>
										<input #fileInput formControlName="view_image" id="file"type="file"  class="form-control" (change)="onImageHandler($event)" >
										<!-- <mat-error *ngIf="Error('file','required') && showError ">Select file </mat-error> -->
									</div>
								</div>
								<!-- <div class="row button-group-lg button-auto mt-4">
									<div class="col-md-6 col-6">
									   <button type="submit" id="kt_sign_in_submit" class="btn btn-success" *ngIf="!isReadonly" style="float:right;" >Save</button>
									</div>
									<div class="col-md-6 col-6">
									   <button type="button" class="btn btn-outline-primary" #closebutton data-dismiss="modal"(click)="cancelmodal()"  style="float:right;" >Cancel</button>
									</div>
								 </div> -->
								<br>
								<button type="submit" id="kt_sign_in_submit"  class="btn btn-success"
								style="float:right;">
								Save
								 </button>
								 <button type="button" style="float:right;" class="btn btn-outline-primary" #closebutton data-dismiss="modal" (click)="cancelmodal()">Cancel</button>
								 <!-- <div class="col-md-4 col-4">

								   </div> -->

							</form>
						</div>
						<div class="col-md-9">
							<div class="table-responsive"  >
								<table mat-table [dataSource]="dataSourceStatus" class="table table-striped table-row-bordered gy-5 gs-7 border rounded" >
									<ng-container matColumnDef="title">
										<th mat-header-cell *matHeaderCellDef><b> Title </b></th>
										<td mat-cell *matCellDef="let view"> {{view.title}} </td>
										<!-- <td mat-cell *matCellDef="let view">rr </td> -->
									 </ng-container>
									 <ng-container matColumnDef="project_progress">
										<th mat-header-cell *matHeaderCellDef><b> Project Progress </b></th>
										<td mat-cell *matCellDef="let view"> {{view.project_progress}} </td>
										<!-- <td mat-cell *matCellDef="let view">rrdf </td> -->
									 </ng-container>
									 <ng-container matColumnDef="start_date">
										<th mat-header-cell *matHeaderCellDef><b> Start Date </b></th>
										<!-- <td mat-cell *matCellDef="let view">yuyu</td> -->
										<td mat-cell *matCellDef="let view"> {{view.start_date}} </td>
									 </ng-container>
									 <ng-container matColumnDef="end_date">
										<th mat-header-cell *matHeaderCellDef><b>End Date</b></th>
										<!-- <td mat-cell *matCellDef="let view">rrfd</td> -->
										<td mat-cell *matCellDef="let view"> {{view.end_date}} </td>
									 </ng-container>
									 <ng-container matColumnDef="file">
										<th mat-header-cell *matHeaderCellDef><b> File </b></th>
										<!-- <td mat-cell *matCellDef="let country"><a href="javascript:void(0)" routerLink="country.file">cfgb</a></td> -->

										<td mat-cell *matCellDef="let view">
											<ng-container *ngIf='view.file!=null'>
											<a href="{{ImgUrl}}{{view.file}}" class="edit-icon text-primary"
										  ><span class="material-icons-outlined"><span class="bi bi-file-earmark-text-fill" style="color:blue" ></span></span></a>
										</ng-container> </td>
									 </ng-container>
									 <ng-container matColumnDef="edit" >
										<th class="text-center" mat-header-cell *matHeaderCellDef ><ng-container><b>Edit</b></ng-container></th>
										<td class="text-center" mat-cell *matCellDef="let view">
										   <a href="javascript:void(0)" data-toggle="modal" data-target="#tasking-modal" class="edit-icon text-primary" placement="end" tooltipClass="dark-theme" ngbTooltip=Edit (click)="editOption(view)" ><span class="bi bi-pencil" ></span></a></td>
									 </ng-container>
									 <ng-container matColumnDef="delete">
									  <th class="text-center" mat-header-cell *matHeaderCellDef ><ng-container ><b>Delete</b></ng-container></th>
									  <td class="text-center" mat-cell *matCellDef="let view"><a href="javascript:void(0)" class="edit-icon text-danger" placement="end" tooltipClass="dark-theme" ngbTooltip=Delete (click)="onDelete(view.id)"><span class="bi bi-trash"></span></a></td>
								   </ng-container>

									 <tr mat-header-row *matHeaderRowDef="displayedColumnslist"></tr>
									 <tr mat-row *matRowDef="let row; columns: displayedColumnslist;"></tr>
								</table>
							</div>
						</div>
					</div>
				</div>

			</div>


		</div>
	</div>
 </div>

 <!-- status modal -->

 <div class="modal fade bd-example-modal-lg" id="viewTasking-modal" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div style="height: 550px; ">
				<div class="modal-header">
					<h4 class="modal-title">View Status Of Task</h4>
					<button type="button" class="btn-close" (click)="closeviewlistmodal()" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="false">&times;</span>
						</button>
					<!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
						</button> -->
				</div>

				<div class="modal-body " style="padding-top:10px; padding-bottom:0%" >
					<h4>
						<div>Task Name - {{taskname}} ({{tasknumber}})</div>
					</h4>
					<div class="row g-6 g-xl-9 ">
						<div class="col-xl-6 mb-xl-10">
							<div class="card card-bordered p-3" style="width: 100%;height: 450px;">

							<p>Starting Date:- {{viewlist && viewlist.created_on| date:'dd-MM-yyyy'}}</p>
							<div id="chart" style="width: 100%; height: 365px">
								<apx-chart
									[series]="chartOptions.series"
									[chart]="chartOptions.chart"
									[dataLabels]="chartOptions.dataLabels"
									[stroke]="chartOptions.stroke"
									[colors]="chartOptions.colors"
									[title]="chartOptions.title"
									[grid]="chartOptions.grid"
									[tooltip]="chartOptions.tooltip"
									[plotOptions]="chartOptions.plotOptions"
									[yaxis]="chartOptions.yaxis"
									[xaxis]="chartOptions.xaxis"
								></apx-chart>
							</div>
							<!-- <div id="chart" style="width: 100%; height: 365px"></div> -->
							<!-- <p>Expected Completion Date:- 30-01-2023</p> -->
							</div>
						</div>
						<div class="col-xl-6 mb-xl-10">
							<div class="card card-bordered" style="height: 450px;overflow-y: scroll;">
								<div class="card-body" >
									<table class="table table-bordered table-style4" *ngIf="commentslist?commentslist.length!=0:'' ;else nocomments">
										<tr>
											<!-- <pre>hg{{comments?commentslist.length}}</pre> -->
											<th >Name</th> <th width="50%">Comments</th> <th width="30%">Date</th><th>Action</th><th *ngIf="api.userid.role_id===1">Delete</th>
									  </tr>
									  <ng-container *ngFor="let comment of commentslist">
									  <tr>
										<td>{{comment.created_by.first_name}}</td><td>{{comment.comments}}</td><td>{{comment.created_on| date:'dd-MM-yyyy'}}</td>
										<td ><a href="javascript:void(0)"  *ngIf="comment.created_by.id===login_id || api.userid.role_id===1;else noaction"><span class="bi bi-pencil" (click)="commentModal(comment)"></span></a>
										<ng-template #noaction>
											<div>-</div>
										</ng-template>
										</td><td *ngIf="api.userid.role_id===1"><a href="javascript:void(0)" (click)="commentDelete(comment)"><span class="bi bi-trash" ></span></a></td>
									  </tr>
									</ng-container>

									</table>
									<ng-template #nocomments>
										<div class="card-body nocomment">No Comments</div>
									</ng-template>

								</div>

								<form [formGroup]="this.commentForm">
								<div class="card-footer pt-4 p-2">
									<!--begin::Input-->
									<!-- <textarea class="form-control mb-3" rows="1"  ></textarea> -->
									<textarea class="form-control" rows="1" formControlName="comments" placeholder="Type a Comment"></textarea>
									<mat-error *ngIf="Errorcomment('comments','required') && showcomments">Enter comments</mat-error>
									<!--end::Input-->
									<!--begin:Toolbar-->
									<br>
									<div class="d-flex" style="float:right;">
										<!--begin::Actions-->

										<!--end::Actions-->
										<!--begin::Send-->
										<button class="btn btn-primary mb-1"  type="button" (click)="saveviewstatus()">Add Comment</button>
										<!--end::Send-->
									</div>
									<!--end::Toolbar-->
								</div>
							</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
 </div>

 <!--------completed task -->
 <div class="modal fade bd-example-modal-lg" id="completedTask-modal" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div style="height: 550px; ">
				<div class="modal-header">
					<h4 class="modal-title">Completed Task</h4>
					<button type="button" class="btn-close" (click)="closecompletedmodal()" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="false">&times;</span>
						</button>
				</div>
				<div class="modal-body form-style-md form-style-font linux">
					<div id="hide_alert" class="alert alert-danger form-error-message my-4" *ngIf="error_msg==true">{{ErrorMsg}}
					</div>
					<form [formGroup]="this.completedForm"  >
						<div class="row">
							<div class="col-md-12">
								<div class="matt-group">
								   <mat-label>Comments<b class="star">*</b></mat-label>

									  <input type="text" class="form-control form-control-lg" formControlName="completed_comments" autocomplete="off">
									  <!-- <mat-error *ngIf="Errorcompleted('comments','required') && showcomments">Enter comments</mat-error> -->

								</div>
							 </div>
						</div>
						<div class="row button-group-lg button-auto mt-4">
							<div class="col-md-6 col-6">
							   <button type="submit" class="btn btn-success w-100" (click)="savecompleted()">Completed</button>
							</div>
							<div class="col-md-6 col-6">
							   <button type="button" class="btn btn-outline-primary w-100" #closebutton data-dismiss="modal"(click)="closecompletedmodal()">Cancel</button>
							</div>
						 </div>
					</form>

				</div>

			</div>

		</div>

	</div>

 </div>

 <div class="modal fade bd-example-modal-lg" id="archive-modal" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content">
			<div style="height: 550px; ">
				<div class="modal-header">
					<h4 class="modal-title"></h4>
					<button type="button" class="btn-close" (click)="archiveclose()" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="false">&times;</span>
						</button>
				</div>
				<div class="modal-body form-style-md form-style-font linux">
					<div id="hide_alert" class="alert alert-danger form-error-message my-4" *ngIf="error_msg==true">{{ErrorMsg}}
					</div>
					<form [formGroup]="this.archiveForm" >
						<div class="row">
							<div class="col-md-12">
								<div class="matt-group">
								   <mat-label>Reason<b class="star">*</b></mat-label>

									  <input type="text" class="form-control form-control-lg" formControlName="reason" autocomplete="off">
									  <mat-error *ngIf="Errorarchive('reason','required') ">Enter Reason</mat-error>

								</div>
							 </div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="matt-group">
								   <mat-label>Authority Permission<b class="star">*</b></mat-label>

									  <input type="text" class="form-control form-control-lg" formControlName="authority_permission" autocomplete="off">
									  <mat-error *ngIf="Errorarchive('authority_permission','required')">Enter Authority permission</mat-error>

									  <!-- <mat-error *ngIf="Error('name','required') && showError ">Enter name</mat-error>
									  <mat-error *ngIf="Error('name','pattern') && showError ">Alphabets characters only</mat-error> -->

								</div>
							 </div>
						</div>

						<div class="row button-group-lg button-auto mt-4">
							<div class="col-md-6 col-6">
							   <button type="submit" class="btn btn-success w-100" (click)="savearchive()" >Move Archive</button>
							</div>
							<div class="col-md-6 col-6">
							   <button type="button" class="btn btn-outline-primary w-100" #closebutton data-dismiss="modal"(click)="archiveclose()">Cancel</button>
							</div>
						 </div>

					</form>

				</div>

			</div>

		</div>

	</div>

 </div>

 <!--Edit comment Modal-->
 <div class="modal fade bd-example-modal-lg" id="comment-modal" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-lg">
		<div class="modal-content" style="height: 300px;width: 500px; ">
			<div >
				<div class="modal-body form-style-md form-style-font linux cardd ">
					<div id="hide_alert" class="alert alert-danger form-error-message my-4" *ngIf="error_msg==true">{{ErrorMsg}}
					</div>
					<form [formGroup]="this.commentForm" >
						<div class="row">
							<div class="col-md-12">
								<div class="matt-group">
								   <mat-label>Comments<b class="star">*</b></mat-label>

								   <textarea class="form-control" rows="1" formControlName="comments" placeholder="Type a Comment"></textarea>
									  <!-- <mat-error *ngIf="Errorarchive('comments','required') && showcomments">Enter Reason</mat-error> -->

								</div>
							 </div>
						</div>
						<div class="row button-group-lg button-auto mt-4">
							<div class="col-md-6 col-6">
							   <button type="submit" class="btn btn-success w-100" (click)="saveviewstatus()" >Save</button>
							</div>
							<div class="col-md-6 col-6">
							   <button type="button" class="btn btn-outline-primary w-100" #closebutton data-dismiss="modal"(click)="commentclose()">Cancel</button>
							</div>
						 </div>
					</form>
				</div>
			</div>
		</div>
	</div>
 </div>


<!-----Export-->

 <div class="modal fade master-modal-style" id="export" data-bs-keyboard="false" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
       <div class="modal-content">
          <div class="modal-header">
             <h5 class="modal-title" id="exampleModalLabel">Export Task</h5>
             <button type="button" class="btn-close" (click)="cancelmodal()" data-dismiss="modal" aria-label="Close">
               <span aria-hidden="false">&times;</span>
               </button>
          </div>
          <div class="modal-body form-style-md form-style-font linux">
			<form [formGroup]="this.exportform" (ngSubmit)="saveform(taskid)">
			<div class="row">
				<div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck1" formControlName="initiator">
					   <label class="form-check-label label-text" for="exampleCheck1" >Initiator</label>
					</div>
				 </div>

				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck2" formControlName="apso">
					   <label class="form-check-label label-text" for="exampleCheck2" >APSO</label>
					</div>
				 </div>
				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck3" formControlName="wesee">
					   <label class="form-check-label label-text" for="exampleCheck3" >WESEE</label>
					</div>
				 </div>
				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck4" formControlName="dg_wesee">
					   <label class="form-check-label label-text" for="exampleCheck4" >DG WESEE</label>
					</div>
				 </div>
				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck5" formControlName="dee">
					   <label class="form-check-label label-text" for="exampleCheck5" >DEE</label>
					</div>
				 </div>
				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck6" formControlName="acom">
					   <label class="form-check-label label-text" for="exampleCheck6" >ACOM</label>
					</div>
				 </div>


				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck7" formControlName="com">
					   <label class="form-check-label label-text" for="exampleCheck7" >COM</label>
					</div>
				 </div>


				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck8" formControlName="tasking">
					   <label class="form-check-label label-text" for="exampleCheck8" >Tasking Status</label>
					</div>
				 </div>

				 <div class="col-md-12">
					<div class="form-group form-check mb-4">
					   <input type="checkbox" class="form-check-input" id="exampleCheck9" formControlName="mile">
					   <label class="form-check-label label-text" for="exampleCheck9" >Milestone</label>
					</div>
				 </div>

				 <div class="row button-group-lg button-auto mt-4">
					<div class="col-md-6 col-6">
					   <button type="submit" class="btn btn-success w-100">Export</button>
					</div>
					<div class="col-md-6 col-6">
					   <button type="button" class="btn btn-outline-primary btn-danger w-100" #closebutton data-dismiss="modal"(click)="cancelmodal()">Cancel</button>
					</div>
				 </div>



			</div>
			</form>

          </div>
       </div>
    </div>
 </div>

 <!-----Export-->
